[tool.ruff]
target-version = "py311"
line-length = 100

[tool.ruff.lint]
# E = pycodestyle errors, F = pyflakes, I = isort, W = warnings
# Excluimos reglas que chocan con el estilo actual del proyecto
select = ["E", "F", "W", "I"]
ignore = [
    "E501",   # líneas largas (ya controlado por line-length)
    "E741",   # nombres de variable ambiguos (l, O, I) — hay algunos en el proyecto
    "F841",   # variable local asignada pero no usada (common in async handlers)
    "W291",   # trailing whitespace
    "W293",   # whitespace en línea en blanco
]

[tool.ruff.lint.per-file-ignores]
# En tests, importar dentro de funciones y redefinir nombres es normal
"tests/*" = ["F401", "F811", "E402"]
# handlers que ejecutan warnings.filterwarnings() antes de importar telegram (intencional)
"bot/handlers/budget.py"    = ["E402"]
"bot/handlers/expense.py"   = ["E402"]
"bot/handlers/income.py"    = ["E402"]
"bot/handlers/recurring.py" = ["E402"]

[tool.ruff.lint.isort]
known-first-party = ["ai", "bot", "database", "services", "reports", "config"]
